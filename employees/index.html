<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recruita — Employee Portal</title>

  <style>
    :root{--blue:#2B7FFF;--bg:#f7fafc;--muted:#556;--card:#fff}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:#111}
    .wrap{max-width:1100px;margin:24px auto;padding:18px}
    header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    h1{margin:0;font-size:20px}
    .grid{display:grid;gap:12px}
    .auth,.panel,.card{background:var(--card);padding:16px;border-radius:10px;border:1px solid #e6eef9}
    input,button{font-family:inherit;padding:10px;border:1px solid #e6eef9;border-radius:8px;width:100%}
    button{background:var(--blue);color:#fff;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .small-btn{background:#fff;color:var(--blue);border:1px solid var(--blue);cursor:pointer;width:auto}
    .entry{padding:10px;border-radius:8px;border:1px solid #eef6ff;background:#fbfdff;margin-bottom:8px}
    .hide{display:none}
    .status-global{border-radius:8px;padding:12px;margin:12px 0;font-weight:600}
    .status-ok{background:#e6ffef;color:#084b2b;border:1px solid #b7f3d0}
    .status-error{background:#ffecec;color:#7a1414;border:1px solid #f2c6c6}
    .badge{background:#f1f5ff;color:var(--blue);padding:6px 10px;border-radius:8px;margin-left:8px}
    .msg{margin-top:12px;padding:10px;border-radius:8px;background:#fff}
    .msg.error{background:#ffecec;color:#7a1414}
    .msg.ok{background:#e6ffef;color:#084b2b}
  </style>

  <!-- 1️⃣ LOAD FIREBASE COMPAT SDKS FIRST -->
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>

  <!-- 2️⃣ THEN LOAD firebase-config.js -->
  <script src="firebase-config.js"></script>
</head>

<body>
<div class="wrap">
  <header>
    <h1>Recruita — Employee Portal</h1>
  </header>

  <div id="globalStatus" class="status-global status-error">
    Checking Firebase… <span id="sdkType" class="badge">...</span>
  </div>

  <button id="tabEmployee" class="small-btn">Employee Login</button>
  <button id="tabAdmin" class="small-btn">Admin Login</button>

  <div id="employeeSection">
    <div id="empAuth" class="auth grid">
      <strong>Employee Login (ID + Password)</strong>
      <input id="empId" placeholder="Employee ID (e.g. EMP001)">
      <input id="empPassword" type="password" placeholder="Password">
      <button id="empLoginBtn">Login</button>
      <div id="empAuthMsg" class="msg"></div>
    </div>
  </div>

  <div id="adminSection" class="hide">
    <div id="adminAuth" class="auth grid">
      <strong>Admin Login</strong>
      <input id="adminEmail" placeholder="Admin email">
      <input id="adminPwd" type="password" placeholder="Password">
      <button id="adminLoginBtn">Sign in</button>
      <div id="adminAuthMsg" class="msg"></div>
    </div>
  </div>
</div>

<!-- 3️⃣ LOAD MAIN APP LOGIC LAST (AFTER FIREBASE + CONFIG) -->
<script>
window.addEventListener("load", () => {

  console.log("startup: checking firebase presence…", typeof firebase);

  if (typeof firebase === "undefined") {
    document.getElementById("sdkType").textContent = "firebase: no";
    document.getElementById("globalStatus").classList.add("status-error");
    document.getElementById("globalStatus").textContent =
      "Firebase SDK is missing. The compat scripts must load BEFORE firebase-config.js and this script.";
    return;
  }

  document.getElementById("sdkType").textContent = "firebase: yes";

  try {
    firebase.initializeApp(firebaseConfig);
    document.getElementById("globalStatus").classList.remove("status-error");
    document.getElementById("globalStatus").classList.add("status-ok");
    document.getElementById("globalStatus").textContent = "Firebase Loaded ✔";
  } catch (e) {
    console.error("Init error:", e);
    document.getElementById("globalStatus").textContent = "Failed to initialize Firebase.";
  }
});
</script>

</body>
</html>
