<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Recruita Admin Panel</title>

<style>
body {
    background:#0b0b0c;
    color:white;
    font-family:Inter, sans-serif;
    padding:20px;
}
.light { background:#f2f2f2; color:#222; }

.topBar {
    display:flex;
    justify-content:flex-end;
    gap:12px;
    margin-bottom:20px;
}

button {
    padding:10px 18px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:600;
}
.blueBtn { background:#2B7FFF; color:white; }
.redBtn { background:#e74c3c; color:white; }
.greyBtn { background:#555; color:white; }

.callBtn {
    padding:6px 10px;
    background:#2B7FFF;
    color:white;
    border-radius:6px;
    text-decoration:none;
}

input, select {
    width:100%;
    padding:12px;
    background:#111;
    color:white;
    border:none;
    border-radius:8px;
    margin-top:8px;
}
.light input, .light select { background:white; color:#222; border:1px solid #ccc; }

.tableBox { overflow-x:auto; margin-top:20px; }

table {
    width:100%;
    margin-top:15px;
    border-collapse:collapse;
}
th, td {
    border:1px solid #333;
    padding:10px;
}
.light th, .light td { border:1px solid #ccc; }

.filterBox {
    margin-top:20px;
    padding:20px;
    background:#111;
    border-radius:12px;
}
.light .filterBox { background:white; border:1px solid #ccc; }

.editInput {
    background:#222;
    color:white;
    padding:6px;
    border-radius:6px;
    width:100%;
}
.light .editInput { background:#fff; color:#222; }

</style>
</head>

<body>

<div class="topBar">
    <button onclick="location.href='manageUsers.html'" class="blueBtn">Manage Users</button>
    <button onclick="toggleTheme()" class="greyBtn">ðŸŒ“ Theme</button>
    <button onclick="logout()" class="redBtn">Logout</button>
</div>

<h2>Admin Dashboard</h2>

<div class="tableBox">
<table>
    <thead>
        <tr>
            <th>EmpID</th>
            <th>Today</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody id="dashBody"></tbody>
</table>
</div>

<h2>Add Candidate Entry</h2>

<input id="nameInput" placeholder="Name">
<input id="numberInput" placeholder="Number (10 digits)">
<input id="ageInput" placeholder="Age">
<input id="expInput" placeholder="Total Experience">
<input id="locInput" placeholder="Location">
<input id="ctcInput" placeholder="CTC">
<input id="compInput" placeholder="Current Company">

<select id="channelInput">
    <option value="">Select Channel</option>
    <option>Banca</option>
    <option>Agency</option>
    <option>Direct</option>
    <option>Tele calling</option>
</select>

<select id="statusInput">
    <option value="">Call Status</option>
    <option>Interested</option>
    <option>Not Interested</option>
    <option>Not Answered</option>
</select>

<input id="remarkInput" placeholder="Remarks">

<button class="blueBtn" onclick="saveData()">Submit Entry</button>

<div style="display:flex; gap:12px; margin-top:25px;">
    <button class="blueBtn" onclick="exportCSV()">Download CSV</button>
    <button id="filterToggleBtn" class="greyBtn" onclick="toggleFilters()">Filter</button>
</div>

<div id="filterPanel" style="display:none;">
    <div class="filterBox">

        <input id="f_name" placeholder="Filter by Name">
        <input id="f_number" placeholder="Filter by Number">
        <input id="f_company" placeholder="Filter by Company">
        <input id="f_location" placeholder="Filter by Location">

        <select id="f_channel">
            <option value="">Filter by Channel</option>
            <option>Banca</option>
            <option>Agency</option>
            <option>Direct</option>
            <option>Tele calling</option>
        </select>

        <select id="f_status">
            <option value="">Filter by Call Status</option>
            <option>Interested</option>
            <option>Not Interested</option>
            <option>Not Answered</option>
        </select>

        <input id="f_empid" placeholder="Filter by EmpID">

        <input id="f_minAge" placeholder="Min Age">
        <input id="f_maxAge" placeholder="Max Age">

        <input id="f_minCTC" placeholder="Min CTC">
        <input id="f_maxCTC" placeholder="Max CTC">

        <label>Start Date</label>
        <input id="f_dateStart" type="date">

        <label>End Date</label>
        <input id="f_dateEnd" type="date">

        <button class="blueBtn" onclick="applyFilters()">Apply Filters</button>
        <button class="greyBtn" onclick="resetFilters()">Reset</button>
    </div>
</div>

<h2>All Entries</h2>

<div class="tableBox">
<table>
  <thead>
    <tr>
      <th>Call</th>
      <th>Time</th>
      <th>EmpID</th>
      <th>Name</th>
      <th>Number</th>
      <th>Age</th>
      <th>Experience</th>
      <th>Location</th>
      <th>CTC</th>
      <th>Company</th>
      <th>Channel</th>
      <th>Status</th>
      <th>Remarks</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody id="listBody"></tbody>
</table>
</div>

<script type="module">

// (Your entire JS code stays exactly the same â€” unchanged)

import { auth, db } from "./firebase.js";
import {
  addDoc, collection, onSnapshot, deleteDoc,
  updateDoc, doc, query, where, getDocs
} from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

let all = [];
let adminEmpID = "";
let adminEmail = "";
let editingID = null;
let filteredData = [];

// Format timestamp
function formatTS(d){
    const p=n=>n.toString().padStart(2,"0");
    return `${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())} ${p(d.getHours())}:${p(d.getMinutes())}:${p(d.getSeconds())}`;
}

// ... (ALL YOUR JS functions remain identical) ...

// Expose functions
window.saveData = saveData;
window.applyFilters = applyFilters;
window.resetFilters = resetFilters;
window.startEdit = startEdit;
window.saveEdit = saveEdit;
window.cancelEdit = cancelEdit;
window.deleteEntry = deleteEntry;
window.exportCSV = exportCSV;
window.toggleFilters = toggleFilters;
window.toggleTheme = toggleTheme;
window.logout = logout;

</script>
</body>
</html>
